% load packages
\usepackage{geometry}
\usepackage{xcolor}
\usepackage{eso-pic}
\usepackage{fancyhdr}
\usepackage{sectsty}
\usepackage{fontspec}
\usepackage{titlesec}

%% Set page size with a wider right margin
\geometry{a4paper, total={170mm,257mm}, left=20mm, top=20mm, bottom=20mm, right=50mm}

% Custom title page definition
\makeatletter
\renewcommand{\maketitle}{
  \begin{titlepage}
    \vspace*{2cm}  % Adjust space
    \begin{center}
      {\sffamily\Huge\bfseries\textcolor{dark}{\@title}} \par
      \vspace{0.5cm}
      {\Large\textcolor{dark}{Professionele bachelor voedings- en dieetunde}} \par  % If you have a subtitle
      \vspace{0.3cm}
      {\small\textcolor{dark}{Onderzoeksskills 1}} \par
      \vspace{1cm}
      {\small\textcolor{dark}{Academiejaar 2024-2025}} \par
      \vspace{0.2cm}
      {\Large\textcolor{dark}{\@author}} \par
      \vspace{3cm}
      {\includegraphics[width=5cm]{_extensions/PrettyPDF/logo_neg.png}}  % Optional logo
    \end{center}
  \end{titlepage}
}
\makeatother

%% Let's define some colours
\definecolor{light}{HTML}{18BC9B}
\definecolor{light2}{HTML}{FABC32}
\definecolor{highlight}{HTML}{0D6453}
\definecolor{dark}{HTML}{07332A}

%% Let's add the border on the right hand side
\AddToShipoutPicture{%
    \AtPageLowerLeft{%
        \put(\LenToUnit{\dimexpr\paperwidth-3cm},0){%
            \color{light2}\rule{3cm}{\LenToUnit\paperheight}%
          }%
     }%
     % logo
    \AtPageLowerLeft{% start the bar at the bottom right of the page
        \put(\LenToUnit{\dimexpr\paperwidth-2.25cm},27.2cm){% move it to the top right
            \color{light}\includegraphics[width=1.5cm]{_extensions/PrettyPDF/logo_neg.png}
          }%
     }%
}

%% Style the page number
\fancypagestyle{mystyle}{
  \fancyhf{}
  \renewcommand\headrulewidth{0pt}
  \fancyfoot[R]{\textcolor{white}{\thepage}} % Change here
  \fancyfootoffset{3.5cm}
}
\setlength{\footskip}{20pt}

%% Apply the custom page style globally
\pagestyle{mystyle}  % <--- This ensures the mystyle is applied to every page

%% Override the plain style for chapter openings to match mystyle
\fancypagestyle{plain}{
  \fancyhf{}
  \renewcommand\headrulewidth{0pt}
  \fancyfoot[R]{\textcolor{white}{\thepage}}
  \fancyfootoffset{3.5cm}
}

%% style the chapter/section fonts
\chapterfont{\color{dark}\fontsize{20}{16.8}\selectfont}
\sectionfont{\color{dark}\fontsize{20}{16.8}\selectfont}
\subsectionfont{\color{dark}\fontsize{14}{16.8}\selectfont}


%% Customize the format of the titles
\titleformat{\chapter}
  {\sffamily\Huge\bfseries}{\thechapter}{1em}{}
\titleformat{\section}
  {\sffamily\Large\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}
  {\sffamily\large\bfseries}{\thesubsection}{1em}{}[{\titlerule[0.8pt]}]



% % left align title
% \makeatletter
% \renewcommand{\maketitle}{\bgroup\setlength{\parindent}{0pt}
% \begin{flushleft}
%   {\sffamily\huge\textbf{\MakeUppercase{\@title}}} \vspace{0.3cm} \newline
%   {\Large {\@subtitle}} \newline
%   \@author
% \end{flushleft}\egroup
% }
% \makeatother

%% Use some custom fonts
\setsansfont{Ubuntu}[
    Path=_extensions/PrettyPDF/Ubuntu/,
    Scale=0.9,
    Extension = .ttf,
    UprightFont=*-Regular,
    BoldFont=*-Bold,
    ItalicFont=*-Italic,
    ]

\setmainfont{Ubuntu}[
    Path=_extensions/PrettyPDF/Ubuntu/,
    Scale=0.9,
    Extension = .ttf,
    UprightFont=*-Regular,
    BoldFont=*-Bold,
    ItalicFont=*-Italic,
    ]
